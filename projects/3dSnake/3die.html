<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport">
    <title>Document</title>
    <script src="jquery.min.js"></script>
    <script src="jquery.cookie.js"></script>
</head>

<body>
    <style>
        :root {
            height: 100%;
            width: 100%;
            margin: 0px;
            padding: 0px;
            min-width: 0px;
            min-height: 0px;
        }

        html {
            margin: 0px;
            padding: 0px;
            height: 100%;
            margin: 0px;
            padding: 0px;
            width: auto;
            aspect-ratio: 16/9;
        }

        body {
            height: 100%;
            margin: 0px;
            padding: 0px;
            width: 100%;

            display: flex;
            justify-content: center;
            /* overflow: hidden; */
        }

        svg {
            position: absolute;
            height: 100%;
            margin: 0px;
            padding: 0px;
            width: auto;
            aspect-ratio: 16/9;
            outline-width: 3px;
            outline-color: rgb(0, 13, 255);
            outline-style: dashed;
            min-width: 0px;
            min-height: 0px;
        }


        
        /* .circlesDiv {
            position:absolute;
            left:0px;
            right:0px;
            height: 100%; 
            margin: 0px;
            z-index: 1;
            background-color: rgba(255, 255, 255, 0);
            width: 100%;
            
            min-width: 0px;
            min-height: 0px;
        } */
        polygon {
            position: absolute;
        }

        .circle {
            display: block;
            width: 10px;
            height: 10px;
            font-weight: 400;
            font-size: 20px;
            position: absolute;
            top: 0px;
            left: 0px;
            background-color: rgba(0, 0, 0, 0);
            margin: 0px;
            padding: 0px
        }
    </style>

    <svg viewBox="0 0 2560 1440">
        <!-- onmousemove="updateMousePos(event)" -->
        <!-- <polygon id="bottom1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">
            </polygon>
            <polygon id="front1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">
            </polygon>
            <polygon id="back1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">

            </polygon>

            
            <polygon id="left1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">
            </polygon>
            <polygon id="right1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">
            </polygon>
            <polygon id="top1" points="220,10 300,210 170,250 123,234"
                style="fill:rgb(122,0,122, 0);stroke:rgba(0, 0, 0, 0);stroke-width:3">
            </polygon> -->

    </svg>
    <!-- <div class="circlesDiv"></div> -->
    <!-- <div class="circle" id="circle">1</div>
    <div class="circle" id="circle2">2</div>
    <div class="circle" id="circle3">3</div>
    <div class="circle" id="circle4">4</div>
    <div class="circle" id="circle5">5</div>
    <div class="circle" id="circle6">6</div>
    <div class="circle" id="circle7">7</div>
    <div class="circle" id="circle8">8</div> -->

    <script>
        var cubes = [
            {
                made: false,
                x: 1280,
                y: 1400,
                offset: 100,
                radius: 1000,
            },
            {
                made: false,
                x: 400,
                y: 400,
                offset: 100,
                radius: 45,
            },
            {
                made: false,
                x: 600,
                y: 2560,
                offset: 100,
                radius: 45,
            }
        ]
        var ran
        var open
        var angle1 = 0
        var angle2 = 0
        var angle3 = 0
        var angle4 = 0
        var mouse = {
            x: 0,
            y: 0
        }
        // $("#circle").empty()
        // $("#circle2").empty()
        // $("#circle3").empty()
        // $("#circle4").empty()
        // $("#circle5").empty()
        // $("#circle6").empty()
        // $("#circle7").empty()
        // $("#circle8").empty()

        var offset = 100
        var ang = 1

        function main() {
            if(ang > 0.1){
                    ang -= 0.001
                }
            renderShape()
          
            angle1 += ang
            if (angle1 >= 90) {
                angle2 += ang
            }
            if (angle1 >= 180) {
                angle3 += ang
            }
            if (angle1 >= 270) {
                angle4 += ang
                ang = 0.1
                
                //     if (offset <= 100) {
                //     offset += 0.01
                // }
            }


        }

        var id = setInterval(main, (1000 / 240))



        function alongPath(id, angle, xposLocal = 400, yposLocal = 400, radius) {
           var Y = yposLocal / 2 + ((Math.sin(angle * Math.PI / 180) * radius)) / (1 + (offset / 100));
            var X = xposLocal + (Math.cos(angle * Math.PI / 180) * radius);

            $(id).css("top", Y + "px")
                .css("left", X + "px")

            return {
                point: " " + X + "," + Y + " ",
                x:X,
                y:Y
            }
        }


        function changeColor(id) {
            $(id).css("display", "none")
         
        }
        function renderShape() {
            for (var i = 0; i < cubes.length; i++) {
                if (cubes[i].made === false) {
                        // for (var j = 1; j <= 8; j++) {
                        //     $("<div>").attr("id", "circle" + j + "" + i)
                        //         .addClass("circle")
                        //         .text(j + "")
                        //         .appendTo(".circlesDiv")

                        // }
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "front" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "back" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "left" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "top" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "bottom" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)
                    $(document.createElementNS('http://www.w3.org/2000/svg', 'polygon')).attr("id", "right" + i).attr("points", "1,1 1,1 1,1 1,1").appendTo("svg").css("fill", "rgb(122,0,122)").css("stroke", "rgba(0, 0, 0)").css("stroke-width", "3").addClass("polygon" + i)

                    cubes[i].made = true
                }
                
                alongPath("#circle1" + i, angle1, cubes[i].x, cubes[i].y, cubes[i].radius)
                alongPath("#circle5" + i, angle1, cubes[i].x, cubes[i].y + cubes[i].offset, cubes[i].radius)
                if (angle1 >= 90) {

                    alongPath("#circle2" + i, angle2, cubes[i].x, cubes[i].y, cubes[i].radius)
                    alongPath("#circle6" + i, angle2, cubes[i].x, cubes[i].y + cubes[i].offset, cubes[i].radius)
                }
                if (angle1 >= 180) {

                    alongPath("#circle3" + i, angle3, cubes[i].x, cubes[i].y, cubes[i].radius)
                    alongPath("#circle7" + i, angle3, cubes[i].x, cubes[i].y + cubes[i].offset, cubes[i].radius)
                }
                if (angle1 >= 270) {
               
                    $(".polygon" + i).css("stroke", "rgb(0,0,0)")
                        .css("fill", "rgb(0,150,255)")
                        .css("stroke-width", "1")
                    $(".polygon" + 0).css("stroke", "rgb(0,0,0)")
                        .css("fill", "rgb(144,0,255)")
                        .css("stroke-width", "1")
                        

                    alongPath("#circle4" + i, angle4, cubes[i].x, cubes[i].y, cubes[i].radius)
                    alongPath("#circle8" + i, angle4, cubes[i].x, cubes[i].y + cubes[i].offset, cubes[i].radius)

                    var a1 = alongPath("#circle"  + i, angle1, (cubes[i].x), cubes[i].y, cubes[i].radius)
                    var a2 = alongPath("#circle2" + i, angle2, (cubes[i].x), cubes[i].y, cubes[i].radius)
                    var a3 = alongPath("#circle3" + i, angle3, (cubes[i].x), cubes[i].y, cubes[i].radius)
                    var a4 = alongPath("#circle4" + i, angle4, (cubes[i].x), cubes[i].y, cubes[i].radius)
                    var a5 = alongPath("#circle5" + i, angle1, (cubes[i].x), cubes[i].y + cubes[i].offset, cubes[i].radius)
                    var a6 = alongPath("#circle6" + i, angle2, (cubes[i].x), cubes[i].y + cubes[i].offset, cubes[i].radius)
                    var a7 = alongPath("#circle7" + i, angle3, (cubes[i].x), cubes[i].y + cubes[i].offset, cubes[i].radius)
                    var a8 = alongPath("#circle8" + i, angle4, (cubes[i].x), cubes[i].y + cubes[i].offset, cubes[i].radius)
                    $("#back" + i).attr("points", a4.point + a8.point + a7.point + a3.point).css("display", "block")
                    $("#front" + i).attr("points", a1.point + a5.point + a6.point + a2.point).css("display", "block")
                    $("#bottom" + i).attr("points", a5.point + a6.point + a7.point + a8.point).css("display", "block")
                    $("#left" + i).attr("points", a2.point + a6.point + a7.point + a3.point).css("display", "block")
                    $("#right" + i).attr("points", a1.point + a5.point + a8.point + a4.point).css("display", "block")
                    $("#top" + i).attr("points", a1.point + a2.point + a3.point + a4.point).css("display", "block")
                    
                    if (a1.x > a2.x) {
                        changeColor("#front" + i)
                    }
                    if (a4.x < a3.x) {
                        changeColor("#back" + i)
                    }
                    if (a2.x > a3.x) {
                        changeColor("#left" + i)
                    }
                    if (a1.x < a4.x) {
                        changeColor("#right" + i)
                    }
                    changeColor("#bottom" + i)
                }
                if (i !== 0) {
                    
                    cubes[i].x = alongPath("#circle" + i, angle1, cubes[0].x, cubes[0].y, cubes[0].radius-45).x
                 
                    cubes[i].y = (alongPath("#circle" + i, angle1, cubes[0].x, cubes[0].y, (cubes[0].radius-45)*2).y) + ((cubes[0].y / 2) - cubes[i].offset - 1)

                }
                
            }


        }
        $(document).on("click", place)

        function place() {
            ang += 5
            // cubes.push({ made: false, x: mouse.x, y: mouse.y, offset: 100, radius: 0 })
        }
        // function updateMousePos(event) {
        //     mouse.x = event.clientX
        //     mouse.y = event.clientY
        // }
    </script>
</body>

</html>